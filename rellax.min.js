(function(m,d){"function"===typeof define&&define.amd?define([],d):"object"===typeof module&&module.exports?module.exports=d():m.Rellax=d()})(this,function(){var m=function(d,n){var a=Object.create(m.prototype),h=0,p=0,k=0,q=0,f=[],r=!0,y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1E3/60)},z=window.transformProp||function(){var a=document.createElement("div");
if(null===a.style.transform){var b=["Webkit","Moz","ms"],e;for(e in b)if(void 0!==a.style[b[e]+"Transform"])return b[e]+"Transform"}return"transform"}();a.options={speed:-2,center:!1,wrapper:null,round:!0,vertical:!0,horizontal:!1,callback:function(){}};n&&Object.keys(n).forEach(function(c){a.options[c]=n[c]});d||(d=".rellax");var l="string"===typeof d?document.querySelectorAll(d):d instanceof NodeList||d instanceof HTMLCollection?[].slice.call(d):d instanceof Array?d:[d];if(0<l.length)a.elems=l;
else throw Error("The elements you're trying to select don't exist.");if(a.options.wrapper&&!a.options.wrapper.nodeType)if(l=document.querySelector(a.options.wrapper))a.options.wrapper=l;else throw Error("The wrapper you're trying to use don't exist.");var u=function(){for(var c=0;c<f.length;c++)a.elems[c].style.cssText=f[c].style;f=[];p=window.innerHeight;q=window.innerWidth;v();for(c=0;c<a.elems.length;c++){var b=a.elems[c],e=b.getAttribute("data-rellax-percentage"),d=b.getAttribute("data-rellax-speed"),
m=b.getAttribute("data-rellax-zindex")||0,h=a.options.wrapper?a.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,g=a.options.vertical?e||a.options.center?h:0:0,k=a.options.horizontal?e||a.options.center?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0:0;h=g+b.getBoundingClientRect().top;var l=b.clientHeight||b.offsetHeight||b.scrollHeight,n=k+b.getBoundingClientRect().left,t=b.clientWidth||b.offsetWidth||b.scrollWidth;
g=e?e:(g-h+p)/(l+p);e=e?e:(k-n+q)/(t+q);a.options.center&&(g=e=.5);d=d?d:a.options.speed;e=w(e,g,d);b=b.style.cssText;g="";0<=b.indexOf("transform")&&(g=b.indexOf("transform"),g=b.slice(g),g=(k=g.indexOf(";"))?" "+g.slice(11,k).replace(/\s/g,""):" "+g.slice(11).replace(/\s/g,""));f.push({baseX:e.x,baseY:e.y,top:h,left:n,height:l,width:t,speed:d,style:b,transform:g,zindex:m})}r&&(window.addEventListener("resize",u),r=!1);x()},v=function(){var c=h,b=k;h=a.options.wrapper?a.options.wrapper.scrollTop:
(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset;k=a.options.wrapper?a.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset;return c!=h&&a.options.vertical||b!=k&&a.options.horizontal?!0:!1},w=function(c,b,e){var d={};c=100*e*(1-c);b=100*e*(1-b);d.x=a.options.round?Math.round(c):Math.round(100*c)/100;d.y=a.options.round?Math.round(b):Math.round(100*b)/100;return d},t=function(){v()&&
!1===r&&x();y(t)},x=function(){for(var c,b=0;b<a.elems.length;b++){c=w((k-f[b].left+q)/(f[b].width+q),(h-f[b].top+p)/(f[b].height+p),f[b].speed);var d=c.y-f[b].baseY,l=c.x-f[b].baseX;a.elems[b].style[z]="translate3d("+(a.options.horizontal?l:"0")+"px,"+(a.options.vertical?d:"0")+"px,"+f[b].zindex+"px) "+f[b].transform}a.options.callback(c)};a.destroy=function(){for(var c=0;c<a.elems.length;c++)a.elems[c].style.cssText=f[c].style;r||(window.removeEventListener("resize",u),r=!0)};u();t();a.refresh=
u;return a};return m});
